"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getENV=exports.getUA=void 0;var sdk_1=require("./sdk"),sdk_2=require("./sdk");Object.defineProperty(exports,"ENV_ENUM",{enumerable:!0,get:function(){return sdk_2.ENV_ENUM}}),Object.defineProperty(exports,"APP_TYPE",{enumerable:!0,get:function(){return sdk_2.APP_TYPE}}),Object.defineProperty(exports,"ENV_ENUM_SUB",{enumerable:!0,get:function(){return sdk_2.ENV_ENUM_SUB}});var dingtalk_javascript_env_1=require("./packages/dingtalk-javascript-env"),getTopBridge=function(){try{if("undefined"!=typeof window&&void 0!==window.top){return window.top.__dingtalk_jsapi_top_platfrom_config__}}catch(e){return}},EDdWeexEnv;!function(e){e.singlePage="singlePage",e.miniApp="miniApp",e.miniWidget="miniWidget"}(EDdWeexEnv||(EDdWeexEnv={})),exports.getUA=function(){var e="";try{"undefined"!=typeof navigator&&(e=navigator&&(navigator.userAgent||navigator.swuserAgent)||"")}catch(t){e=""}return e},exports.getENV=function(){var e=exports.getUA(),t=/iPhone|iPad|iPod|iOS/i.test(e),i=/Android/i.test(e),n=(/Nebula/i.test(e),/DingTalk/i.test(e)),a=/dd-web/i.test(e),r="object"==typeof nuva,d="object"==typeof dd&&"function"==typeof dd.dtBridge,o=d&&t||r&&t,_=n||dingtalk_javascript_env_1.default.isDingTalk,s=t&&_||dingtalk_javascript_env_1.default.isWeexiOS||o,p=i&&_||dingtalk_javascript_env_1.default.isWeexAndroid,E=d,g=a,c=sdk_1.APP_TYPE.WEB;if(g)c=sdk_1.APP_TYPE.WEBVIEW_IN_MINIAPP;else if(E)c=sdk_1.APP_TYPE.MINI_APP;else if(dingtalk_javascript_env_1.default.isWeexiOS||dingtalk_javascript_env_1.default.isWeexAndroid)try{var u=weex.config.ddWeexEnv;c=u===EDdWeexEnv.miniWidget?sdk_1.APP_TYPE.WEEX_WIDGET:sdk_1.APP_TYPE.WEEX}catch(e){c=sdk_1.APP_TYPE.WEEX}var f,v="*",l=e.match(/AliApp\(\w+\/([a-zA-Z0-9.-]+)\)/);null===l&&(l=e.match(/DingTalk\/([a-zA-Z0-9.-]+)/));var P;l&&l[1]&&(P=l[1]);var k="";"undefined"!=typeof name&&(k=name);var N=getTopBridge();try{N&&"undefined"!=typeof window&&void 0!==window.top&&window.top!==window&&(k=top.name)}catch(e){}if(k)try{var A=JSON.parse(k);A.hostVersion&&(P=A.hostVersion),v=A.language||navigator.language||"*",f=A.containerId}catch(e){}var m=!!f;m&&!P&&(l=e.match(/DingTalk\(([a-zA-Z0-9\.-]+)\)/))&&l[1]&&(P=l[1]);var x,U=sdk_1.ENV_ENUM_SUB.noSub;if((x=s?sdk_1.ENV_ENUM.ios:p?sdk_1.ENV_ENUM.android:m?sdk_1.ENV_ENUM.pc:N&&N.platform?N.platform:sdk_1.ENV_ENUM.notInDingTalk)===sdk_1.ENV_ENUM.pc){U=e.indexOf("Macintosh; Intel Mac OS")>-1?sdk_1.ENV_ENUM_SUB.mac:sdk_1.ENV_ENUM_SUB.win}return{platform:x,platformSub:U,version:P,appType:c,language:v}};